<!doctype>
<html>
    <head>
        <title>swiped-events demo</title>
        <meta name="viewport" content="width=device-width,height=device-height,user-scalable=no,initial-scale=1,maximum-scale=1"/>
        <script src="swiped-events.js"></script>
        <script src="bb.js"></script>
        <style>
            body { overflow: hidden; background-color: black;}
            div { 
                position: fixed;
                left: 0;
                right: 0;
                margin: 0;
                padding: 0;
                overflow: hidden;
                font-size: 40px;
                font-family: arial;
                display: flex;
                align-items: center;
                justify-content: center;
            }
    
        </style>
    </head>
    <body data-swipe-threshold='100'>
        <div> 
        <img id="CER" src="/img/cer.png" style="display:none"/>
        <img id="CERO" src="/img/cero.png" style="display:none"/>
        <img id="CNO" src="/img/cnr.png" style="display:none"/>
        <img id="CNRO" src="/img/cnro.png" style="display:none"/>
        <img id="CSR" src="/img/csr.png" style="display:none"/>
        <img id="CSRO" src="/img/csro.png" style="display:none"/>
        <img id="CWR" src="/img/cwr.png" style="display:none"/>
        <img id="CWRO" src="/img/cwro.png" style="display:none"/>

        <img id="MNE" src="/img/mne.png" style="display:none"/>
        <img id="MNEO" src="/img/mneo.png" style="display:none"/>
        <img id="MNW" src="/img/mnw.png" style="display:none"/>
        <img id="MNWO" src="/img/mnwo.png" style="display:none"/>
        <img id="MSE" src="/img/mse.png" style="display:none"/>
        <img id="MSEO" src="/img/mseo.png" style="display:none"/>
        <img id="MSW" src="/img/msw.png" style="display:none"/>
        <img id="MSWO" src="/img/mswo.png" style="display:none"/>

        <img id="PPP" src="/img/ppp.png" style="display:none"/>
        
        <img id="SSS" src="/img/sss.png" style="display:none"/>
        <img id="SSSC" src="/img/sssc.png" style="display:none"/>
        <img id="SSSH" src="/img/sssh.png" style="display:none"/>
        <img id="SSSV" src="/img/sssv.png" style="display:none"/>

        <img id="TER" src="/img/ter.png" style="display:none"/>
        <img id="TERO" src="/img/tero.png" style="display:none"/>
        <img id="TNR" src="/img/tnr.png" style="display:none"/>
        <img id="TNRO" src="/img/tnro.png" style="display:none"/>
        <img id="TSR" src="/img/tsr.png" style="display:none"/>
        <img id="TSRO" src="/img/tsro.png" style="display:none"/>
        <img id="TWR" src="/img/twr.png" style="display:none"/>
        <img id="TWRO" src="/img/twro.png" style="display:none"/>
        
        <img id="ZZZ" src="/img/zzz.png" style="display:none"/>

        <canvas 
            id="myCanvas" 
            width="220" 
            height="220" 
            style="border:1px solid gray; background-color: black;">
            Your browser does not support the HTML canvas tag.
        </canvas>
        </div>
        <script>
            console.log("script start");
            var c = document.getElementById("myCanvas");
            var ctx = c.getContext("2d");
            var imgCount = 0;
            var img = {}
            var x = 5*20;
            var y = 5*20; 
            console.log("script 2");
            function init() 
            {
            
                console.log("onload start");
                loadImages();
                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                drawLevel();
                ctx.drawImage(img["PPP"], x, y);
            }
            window.addEventListener("load", init)
            function moveLeft()
            {
                if(x>0) x=x-20;
                //ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)
                drawLevel();
                ctx.drawImage(img["PPP"], x, y);
            }
            function moveRight()
            {
                if(x<200) x=x+20;
                //ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)
                drawLevel();
                ctx.drawImage(img["PPP"], x, y);
            }
            function moveUp()
            {
                if(y>0) y=y-20;
                //ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)
                drawLevel();
                ctx.drawImage(img["PPP"], x, y);
            }
            function moveDown()
            {
                if(y<200) y=y+20;
                //ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)
                drawLevel();
                ctx.drawImage(img["PPP"], x, y);
            } 
            window.onload = function() {
                document.addEventListener('swiped-left', function(e) {moveLeft(); });
                document.addEventListener('swiped-right', function(e) {moveRight(); });
                document.addEventListener('swiped-up', function(e) {moveUp(); });
                document.addEventListener('swiped-down', function(e) {moveDown(); });
            }
            function checkKey(e)
            {
                e = e || window.event;
                //ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)
                if(e.keyCode==37) {moveLeft();}
                if(e.keyCode==39) {moveRight();}
                if(e.keyCode==38) {moveUp();}
                if(e.keyCode==40) {moveDown();}
            }
            document.onkeydown = checkKey;
            
        </script>
    </body>
</html>